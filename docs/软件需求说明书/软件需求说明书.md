版本0.2

# 软件需求说明书

## 引言

### 编写目的

为了开发图书馆座位预约管理系统，编写此软件需求规格说明书。

目的在于规范清晰化需求、检验需求达成度、针对性维护以及螺旋式开发。

预期的读者：

- 本项目的设计、开发、测试人员
- 本项目的客户、用户、审核人员

### 背景

说明：

1. 项目名称：图书馆座位管理系统

2. 项目角色：

   | 角色       | 对象                               |
   | ---------- | ---------------------------------- |
   | 任务提出者 | 18级软件工程ZYH班Alipapa小组       |
   | 开发者     | 18级软件工程ZYH班Alipapa小组       |
   | 用户       | 西北大学师生                       |
   | 部署目标   | 多部RFID打卡机、云服务器、移动终端 |

3. 该软件系统同其他系统或其他机构的基本的相互来往关系

	- 本软件系统隶属于西北大学图书馆，是面向图书馆座位资源的管理系统。

	- 西北大学图书馆及其隶属机构、组织拥有其操作管理权限。

	- 西北大学师生为其主要服务对象，拥有其使用权限。

	- 2018级软件工程课程ZYH班Alipapa小组为其开发、维护及更新团队。负责对该软件系统的开发、维护及更新。

### 定义

- RFID: (Radio Frequency IDentification)射频识别技术，用来读用户的校园卡
- 图书馆：指西北大学长安校区图书馆
- C/S架构：客户端/服务端架构
- Android：中文常译作安卓，是一个基于Linux内核的开放源代码移动操作系统
- iOS：iOS是由苹果公司开发的移动操作系统
- nodejs：是一个基于Chrome V8 引擎 的JavaScript 运行时
- linux：Linux，全称GNU/Linux，是一套免费使用和自由传播的类UNIX操作系统
- JDK：JDK是 Java 语言的软件开发工具包
- docker：Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的镜像中
- MySQL：MySQL是一个关系型数据库管理系统，由瑞典*MySQL* AB 公司开发，属于 Oracle 旗下产品
- windows：Microsoft Windows操作系统是美国微软公司研发的一套操作系统
- macOS：Mac OS是一套运行于苹果Macintosh系列电脑上的操作系统

### 参考资料

#### 后端

- [Java Spring框架](https://spring.io/)

- [Maven](http://maven.apache.org/)

#### 前端

- [微信小程序开发文档](https://developers.weixin.qq.com/miniprogram/dev/framework/)
- [微信开发者工具](https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Web_Developer_Tools.html#5)
- [npm](https://www.npmjs.com/)

## 任务概述

### 目标
- 编写一套系统，为西北大学师生提供图书馆座位的预约、占位服务。
- 目标是提高座位资源的利用效率、解决座位冲突问题、避免不良占座行为的发生。
- 本系统依赖于西北大学图书馆门禁系统的数据。
- 本系统基于微信小程序平台开发。

### 用户的特点

本软件最终用户为在校师生，在良好界面的引导下可以很快熟练掌握软件的操作方法。操作、维护人员为在校学生。本软件的预期使用频度为1到7次每周。

### 假定和约束

- 假定图书馆可以在出口安装打卡机来向系统报告用户何时离馆。
- 假定本软件能够得到学校官方的支持和推广。
- 本软件开发工作无经费，开发期限为2019-2020学年第二学期期末考试之前。

## 需求规定

### 对功能的规定

| 输入                    | 处理                   | 输出                     |
| ----------------------- | ---------------------- | ------------------------ |
| 打卡机-用户进馆         | 更新预约状态和座位状态 | 操作状态、日志           |
| 打卡机-用户离馆         | 更新预约状态和座位状态 | 操作状态、日志           |
| 客户端-查询座位预约情况 | 查询座位情况，写入缓存 | 所有座位的预约状态、日志 |
| 客户端-绑定学号和微信号 | 写到数据库             | 操作状态、日志           |
| 客户端-登录             | 更新用户登录状态       | 返回登录信息、日志       |
| 客户端-发起预约         | 处理预约               | 预约结果、日志           |
| 客户端-查询预约         | 查找用户最近两周的预约 | 预约状态列表、日志       |

支持最大数十台打卡机和500个客户端同时在线。

### 对性能的规定

#### 精度

| 项目     | 精度要求                            |
| -------- | ----------------------------------- |
| 时间信息 | 精确到分钟和秒（视情况而定）        |
| 传输     | https传输，要求无损，并在出错时重试 |

#### 时间特性要求

| 项目                                 | 要求                       |
| ------------------------------------ | -------------------------- |
| 客户端请求响应时间                   | 60ms以内（不包含公网延迟） |
| 数据更新处理时间                     | 80ms以内                   |
| 内部传输超时（指打卡机和服务端之间） | 默认10s，可更改            |
| 服务端吞吐量                         | 暂定100 QPS                |

#### 灵活性

| 潜在的变化 | 应对                               |
| ---------- | ---------------------------------- |
| 吞吐量     | 扩容                               |
| 运行环境   | 本系统的客户端、服务端均为跨平台的 |


### 输入输出要求

输入：

- 图书馆座位结构：每个座位的座位号、所属的桌子、在第几个位置、楼层数
- 预约：包含预约用户身份信息、预约时间段、座位号
- 用户进馆、离馆：用户身份、进馆时间

输出：

- 座位预约状态：图书馆座位结构、每个座位的预约情况
- 用户信息：用户预约记录、违约记录、预约状态（是否可以预约）

### 数据管理能力要求

需要管理整个图书馆座位状态信息，对座位状态的改变进行实时管理。可以更改座位状态信息，增加删除座位信息等。

### 故障处理要求

- 软件运行故障：在使用过程中出现手机卡死重启等状况，应保证数据完整性，提示用户重新进行操作
- 软件使用故障：应及时给用户发送警告并管理人员发送消息通知以修复

### 其他专门要求

暂无

## 运行环境规定

本系统为C/S架构，客户端运行在微信小程序平台，服务端为任意一台有公网v4地址的服务器，和一套基于RFID的打卡机。

### 设备

客户端在手机上运行，且

1. 设备需要网络连接与服务端进行通信
2. 设备需要具有至少2G的运行内存

服务端在x86主机上运行，且

1. 需要合理的上行带宽
2. 若要支持规定的并发数，预计需要至少8个cpu核心和16G以上的内存

### 支持软件

客户端：

1. 支持操作系统：Android、iOS
2. 支持软件：微信开发者工具、nodejs、微信APP

服务端：

1. 支持操作系统：linux，windows，macOS等
2. 支持软件：JDK11及以上版本，mysql5.7，docker

### 接口

对外暴露一组https接口用于第三方应用查看图书馆空余座位数量。

### 控制

数据通信协议主要使用https。

