# 1引言

## 1.1编写目的

为了开发图书馆座位预约管理系统，编写此软件需求规格说明书。

目的在于规范清晰化需求、检验需求达成度、针对性维护以及螺旋式开发。

预期的读者：

- 本项目的设计、开发、测试人员
- 本项目的客户、用户、审核人员

## 1.2背景

说明：

1. 项目名称：图书馆座位管理系统

2. 项目角色：

   | 角色       | 对象                               |
   | ---------- | ---------------------------------- |
   | 任务提出者 | 18级软件工程ZYH班Alipapa小组       |
   | 开发者     | 18级软件工程ZYH班Alipapa小组       |
   | 用户       | 西北大学师生                       |
   | 部署目标   | 多部RFID打卡机、云服务器、移动终端 |

3. 该软件系统同其他系统或其他机构的基本的相互来往关系

   - 本软件系统隶属于西北大学图书馆，是面向图书馆座位资源的管理系统。

   - 西北大学图书馆及其隶属机构、组织拥有其操作管理权限。

   - 西北大学师生为其主要服务对象，拥有其使用权限。

   - 2018级软件工程课程ZYH班Alipapa小组为其开发、维护及更新团队。负责对该软件系统的开发、维护及更新。

## 1.3定义

- RFID: (Radio Frequency IDentification)射频识别技术，用来读用户的校园卡
- 图书馆：指西北大学长安校区图书馆
- C/S架构：客户端/服务端架构
- Android：中文常译作安卓，是一个基于Linux内核的开放源代码移动操作系统
- iOS：*iOS*是由苹果公司开发的移动操作系统
- nodejs：是一个基于Chrome V8 引擎 的JavaScript 运行时
- linux：Linux，全称GNU/Linux，是一套免费使用和自由传播的类UNIX操作系统
- JDK：JDK是 Java 语言的软件开发工具包，主要用于移动设备、嵌入式设备上的java应用程序
- docker：Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的镜像中
- MySQL：MySQL是一个关系型数据库管理系统，由瑞典*MySQL* AB 公司开发，属于 Oracle 旗下产品
- windows：MicrosoftWindows操作系统是美国微软公司研发的一套操作系统
- macOS：Mac OS是一套运行于苹果Macintosh系列电脑上的操作系统

## 1.4参考资料

### 后端

- [Java Spring框架](https://spring.io/)

- [Maven](http://maven.apache.org/)

### 前端

- [微信小程序开发文档](https://developers.weixin.qq.com/miniprogram/dev/framework/)
- [微信开发者工具](https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Web_Developer_Tools.html#5)
- [npm](https://www.npmjs.com/)

# 2外部设计

## 2.1标识符和状态

联系用途，详细说明用于唯一地标识该数据库的代码、名称或标识符，附加的描述性信息亦要给出。如果该数据库属于尚在实验中、尚在测试中或是暂时使用的，则要说明这一特点及其有效时间范围。

- 数据库容器在虚拟子网中的域名为`mysql`
- 监听端口为`3306`
- DBMS为MySQL
- 主数据库名为`lib_seat`

## 2.2使用它的程序

- 本数据库在测试环境中可以被外部数据库客户端访问
- 本数据库在生产环境中只能被后端容器访问

# 3结构设计

## 3.1概念结构设计

### 用户属性

包含：

- 用户的唯一`id`
- 用户的学号，在绑定之前为空
- 用户的微信昵称
- 用户上次被惩罚的时间，未被惩罚过则为空
- 微信`openid`
- 微信会话秘钥`session_key`
- 自定义登录态`session_id`

### 预约属性

包含：

- 预约的唯一id
- 发起这次预约的用户的id
- 用户预约的座位的id
- 开始和结束时间
- 实际进馆/离馆时间
- 预约日期

### 座位属性

包含：

- 唯一id
- 所属桌子的id
- 在这个桌子的第几个位置

### 桌子属性

包含：

- 唯一id
- 所在楼层
- 位置抽象化后的行号/列号
- 描述

## 3.2逻辑结构设计

![image-20200517165031382](%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E8%AF%B4%E6%98%8E%E4%B9%A6.assets/image-20200517165031382.png)

## 3.3物理结构设计

数据默认保存在容器的`/var/lib/mysql`目录下，会被挂载到物理机上。

# 4安全保密设计

- root用户将被保留，只交予需求方负责人
- admin用户用于管理员管理数据，对主数据库有操作权限
- backend用户用于后端进行操作，对主数据库有有限的权限

